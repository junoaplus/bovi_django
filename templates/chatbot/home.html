{% extends 'chatbot/base.html' %}

{% block title %}BOVI - ë³´ë“œê²Œì„ ì±„íŒ…ë´‡{% endblock %}

{% block extra_css %}
<style>
    .rankings-section {
        background: rgba(255, 255, 255, 0.9);
        padding: 2rem;
        border-radius: 15px;
        margin: 2rem 0;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .rankings-title {
        text-align: center;
        color: #4f46e5;
        margin-bottom: 1.5rem;
        font-size: 1.5rem;
    }
    
    .rankings-list {
        display: grid;
        gap: 0.5rem;
        max-width: 600px;
        margin: 0 auto;
    }
    
    .ranking-item {
        display: flex;
        align-items: center;
        padding: 1rem;
        background: white;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        cursor: pointer;
        text-decoration: none;
        color: inherit;
    }
    
    .ranking-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    
    .ranking-number {
        background: linear-gradient(45deg, #4f46e5, #7c3aed);
        color: white;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        margin-right: 1rem;
        font-size: 0.9rem;
    }
    
    .ranking-number.top-3 {
        background: linear-gradient(45deg, #f59e0b, #d97706);
    }
    
    .ranking-game {
        flex: 1;
        font-weight: 500;
        color: #334155;
    }
    
    .ranking-count {
        color: #64748b;
        font-size: 0.9rem;
    }
    
    .ranking-badge {
        background: #f1f5f9;
        color: #475569;
        padding: 0.25rem 0.75rem;
        border-radius: 15px;
        font-size: 0.8rem;
        margin-left: 0.5rem;
    }
    
    .no-rankings {
        text-align: center;
        color: #64748b;
        font-style: italic;
        padding: 2rem;
    }
    
    .game-type-buttons {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-bottom: 1rem;
    }
    
    .game-type-btn {
        padding: 0.5rem 1rem;
        border: 2px solid #4f46e5;
        background: white;
        color: #4f46e5;
        border-radius: 20px;
        text-decoration: none;
        transition: all 0.3s ease;
        font-size: 0.9rem;
    }
    
    .game-type-btn:hover {
        background: #4f46e5;
        color: white;
        transform: translateY(-2px);
    }
    
    .bang-btn {
        border-color: #dc2626;
        color: #dc2626;
    }
    
    .bang-btn:hover {
        background: #dc2626;
        color: white;
    }
</style>
{% endblock %}

{% block content %}
<div class="home-hero">
    <h1>ğŸ² BOVI</h1>
    <p>ë‹¤ì–‘í•œ ë³´ë“œê²Œì„ ì •ë³´ì™€ ë£°ì„ AI ì±—ë´‡ê³¼ í•¨ê»˜ ì•Œì•„ë³´ì„¸ìš”!</p>
</div>

<!-- ê²Œì„ ìˆœìœ„ ì„¹ì…˜ -->
{% if game_rankings %}
<div class="rankings-section">
    <h2 class="rankings-title">ğŸ† ì¸ê¸° ê²Œì„ ìˆœìœ„ (ì§ˆë¬¸ ìˆ˜ ê¸°ì¤€)</h2>
    <div class="rankings-list">
        {% for ranking in game_rankings %}
        <div class="ranking-item" onclick="handleGameClick('{{ ranking.game_name }}')">
            <div class="ranking-number {% if forloop.counter <= 3 %}top-3{% endif %}">
                {{ forloop.counter }}
            </div>
            <div class="ranking-game">{{ ranking.game_name }}</div>
            <div class="ranking-count">
                ì´ {{ ranking.total_count }}ê°œ ì§ˆë¬¸
                <span class="ranking-badge">GPT: {{ ranking.gpt_count }}</span>
                <span class="ranking-badge">íŒŒì¸íŠœë‹: {{ ranking.ft_count }}</span>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% else %}
<div class="rankings-section">
    <h2 class="rankings-title">ğŸ† ê²Œì„ ìˆœìœ„</h2>
    <div class="no-rankings">
        ì•„ì§ ì§ˆë¬¸ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. ê²Œì„ì— ëŒ€í•´ ì§ˆë¬¸ì„ í•´ë³´ì„¸ìš”!
    </div>
</div>
{% endif %}

<div class="feature-cards">
    <div class="feature-card">
        <h3>ğŸ® ê²Œì„ ì¶”ì²œ</h3>
        <p>ì·¨í–¥ê³¼ ìƒí™©ì— ë§ëŠ” ë³´ë“œê²Œì„ì„ ì¶”ì²œë°›ìœ¼ì„¸ìš”. ì¸ì›ìˆ˜, ë‚œì´ë„, ì¥ë¥´ ë“±ì„ ê³ ë ¤í•˜ì—¬ ìµœì ì˜ ê²Œì„ì„ ì°¾ì•„ë“œë¦½ë‹ˆë‹¤.</p>
        <a href="{% url 'chatbot:game_recommendation' %}">ê²Œì„ ì¶”ì²œë°›ê¸°</a>
    </div>
    
    <div class="feature-card">
        <h3>ğŸ¤– GPT ë£° ì„¤ëª…</h3>
        <p>ë³´ë“œê²Œì„ì˜ ë³µì¡í•œ ë£°ì„ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆë„ë¡ GPTê°€ ì¹œì ˆí•˜ê²Œ ì„¤ëª…í•´ë“œë¦½ë‹ˆë‹¤. QRì½”ë“œë¡œ ëª¨ë°”ì¼ì—ì„œë„ ì´ìš© ê°€ëŠ¥!</p>
        <a href="{% url 'chatbot:gpt_rules' %}">ë£° ì„¤ëª…ë°›ê¸°</a>
    </div>
    
    <div class="feature-card">
        <h3>âš™ï¸ íŒŒì¸íŠœë‹ ë£° ì„¤ëª…</h3>
        <p>íŠ¹ë³„íˆ íŒŒì¸íŠœë‹ëœ AI ëª¨ë¸ì´ ë”ìš± ì •í™•í•˜ê³  ìì„¸í•œ ë³´ë“œê²Œì„ ë£°ì„ ì„¤ëª…í•´ë“œë¦½ë‹ˆë‹¤. ëª¨ë°”ì¼ ì§€ì›!</p>
        <a href="{% url 'chatbot:finetuning_rules' %}">ì „ë¬¸ ë£° ì„¤ëª…ë°›ê¸°</a>
    </div>
    
    <div class="feature-card">
        <h3>ğŸ“Š QA ë°ì´í„° í†µê³„</h3>
        <p>ì‹¤ì‹œê°„ìœ¼ë¡œ ìŒ“ì´ëŠ” ì§ˆë¬¸ë‹µë³€ ë°ì´í„°ë¥¼ í™•ì¸í•˜ê³  ê´€ë¦¬í•˜ì„¸ìš”. ì‚¬ìš©ìê°€ ì§ˆë¬¸í•  ë•Œë§ˆë‹¤ ìë™ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤!</p>
        <a href="{% url 'chatbot:qa_stats' %}">í†µê³„ í™•ì¸í•˜ê¸°</a>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function handleGameClick(gameName) {
    // ë±…ì¸ì§€ í™•ì¸
    if (gameName.toLowerCase().includes('ë±…') || gameName.toLowerCase().includes('bang')) {
        // ë±…ì´ë©´ íŒŒì¸íŠœë‹ ë£° ì„¤ëª… í˜ì´ì§€ë¡œ
        window.location.href = "{% url 'chatbot:finetuning_rules' %}?game=" + encodeURIComponent(gameName);
    } else {
        // ë‹¤ë¥¸ ê²Œì„ì´ë©´ GPT ë£° ì„¤ëª… í˜ì´ì§€ë¡œ
        window.location.href = "{% url 'chatbot:gpt_rules' %}?game=" + encodeURIComponent(gameName);
    }
}
</script>
{% endblock %}
